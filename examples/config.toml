# eaRS Configuration File
"$schema" = "https://raw.githubusercontent.com/byteowlz/schemas/refs/heads/main/eaRS/eaRS.config.schema.json"

[storage]
# Model storage directory - "default" uses HuggingFace cache
model_dir = "default"
# Reference audio directory for language priming
ref_audio = "~/.local/share/ears/ref_audio"

[model]
# Languages to prime on model startup (e.g., ["de", "ja"] to inject German and Japanese audio snippets)
# This improves transcription accuracy for these languages from the first words
prime_languages = []

[whisper]
# Enable Whisper enhancement for higher accuracy transcription
enabled = false
# Default Whisper model to use
default_model = "large-v3-turbo"
# Model format: "gguf" or "safetensors"
model_format = "gguf"
# Quantization level: Q5_0, Q8_0, f32 (for ggerganov/whisper.cpp models)
quantization = "Q5_0"
# Languages to enhance (only these will be processed by Whisper)
languages = ["ger", "jap"]
# Confidence threshold for accepting Whisper corrections
confidence_threshold = 0.7
# Storage directory for Whisper models - "default" uses HuggingFace cache
storage_dir = "default"

[whisper.sentence_detection]
# Minimum sentence duration in seconds
min_duration = 1.0
# Maximum sentence duration in seconds
max_duration = 30.0
# VAD confidence threshold for detecting pauses
vad_pause_threshold = 0.8
# Minimum silence duration to consider sentence boundary
silence_duration = 0.5
# Punctuation markers that indicate sentence endings
punctuation_markers = [".", "!", "?", "。", "！", "？"]

[server]
# WebSocket server host address (default: local machine "127.0.0.1")
host = "127.0.0.1"
# WebSocket server port for streaming transcription
websocket_port = 8765
# Enable listener mode to allow read-only clients to monitor transcription streams
enable_listener_mode = false
# Authentication tokens for listener clients (keep these secure!)
# Generate tokens with: openssl rand -hex 32
listener_tokens = []
# Example with tokens:
# listener_tokens = [
#     "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6",
#     "secure-token-for-client-2",
# ]
# Note: VAD timeout is set per-command-line invocation (--vad-timeout <sec>).
# ears-auto does not use VAD timeout by default (runs indefinitely until manually stopped).

[dictation]
# Enable dictation mode (types transcribed text directly into any focused textbox)
enabled = false
# Type words immediately as they arrive (true) or only when final transcription is ready (false)
type_live_words = true
# Default server alias to connect to (use with: ears-dictation or ears-dictation --server local)
default_server = "local"

# Named server configurations for quick switching between endpoints
# Usage: ears-dictation --server <alias>
# Or directly: ears-dictation --server ws://custom-host:9000

[dictation.servers.local]
# Local server running on this machine
host = "127.0.0.1"
port = 8765
description = "Local eaRS server"

# Example remote server configurations (uncomment to use):
# [dictation.servers.workstation]
# host = "192.168.1.100"
# port = 8765
# description = "Office workstation with GPU"

# [dictation.servers.cloud]
# host = "transcribe.example.com"
# port = 443
# description = "Cloud transcription service"

[dictation.notifications]
# Show desktop notification when dictation is toggled on/off
enabled = true
# Message shown when dictation resumes typing input
start_message = "Dictation enabled"
# Message shown when dictation pauses typing input
pause_message = "Dictation paused"
# Message shown when dictation stops completely
stop_message = "Dictation disabled"

# Dictation hooks require compiling with `--features hooks`
[dictation.hooks]
# Command executed when dictation resumes typing input (leave blank to disable)
start_command = ""
# Command executed when dictation pauses typing input (leave blank to disable)
pause_command = ""
# Command executed when dictation stops completely (leave blank to disable)
stop_command = ""

[hotkeys]
# Enable internal global hotkeys for dictation control (disable if using WM binds like Hyprland)
enable_internal = true
# Toggle dictation pause/resume (default: ctrl+shift+v)
toggle = "ctrl+shift+v"
# Cycle language among en, de, fr, es, ja (default: ctrl+shift+l)
language_cycle = "ctrl+shift+l"
# Note: On macOS, grant Accessibility and Input Monitoring permissions to your terminal or ears-dictation binary.

[subs]

font = "JetBrainsMono NerdFond"
# Position of the subtitle bar in percent relative to the top left corner of the screen
x_position = 50
y_position = 90

# width and height in percentage relative to the height and width of the screen
width = 90
heigth = 10
# border radius in px
border_radius = 5
# border_thickness in px, 0 for no border
border_thickness = 1
